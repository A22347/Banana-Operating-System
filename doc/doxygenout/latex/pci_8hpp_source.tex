\hypertarget{pci_8hpp_source}{}\doxysection{pci.\+hpp}
\label{pci_8hpp_source}\index{C:/Users/Alex/Desktop/Banana/kernel/hw/bus/pci.hpp@{C:/Users/Alex/Desktop/Banana/kernel/hw/bus/pci.hpp}}
\mbox{\hyperlink{pci_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{2 \textcolor{preprocessor}{\#ifndef \_PCI\_HPP\_}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#define \_PCI\_HPP\_}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{bus_8hpp}{hal/bus.hpp}}"{}}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{keyword}{class }\mbox{\hyperlink{class_p_c_i}{PCI}};}
\DoxyCodeLine{9 \textcolor{keyword}{extern} \mbox{\hyperlink{class_p_c_i}{PCI}}* \mbox{\hyperlink{pci_8hpp_a0c460822d9f7cf08a9509c3dc7142996}{thePCI}};}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{keyword}{class }\mbox{\hyperlink{class_p_c_i}{PCI}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_bus}{Bus}}}
\DoxyCodeLine{12 \{}
\DoxyCodeLine{13 \textcolor{keyword}{private}:}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{keyword}{protected}:}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{keyword}{public}:}
\DoxyCodeLine{18     \mbox{\hyperlink{class_p_c_i_ab18be170d6017a362dd4a04831fb0d0c}{PCI}}();}
\DoxyCodeLine{19 }
\DoxyCodeLine{20     \textcolor{keyword}{virtual} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_p_c_i_aa83052c064fd8c6fdddc15b09bd6c0d5}{open}}(\textcolor{keywordtype}{int}, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{void}*);          \textcolor{comment}{//Opens the device (init code).}}
\DoxyCodeLine{21     \textcolor{keyword}{virtual} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_p_c_i_aed0f1352a60f0a5e1acfd45b5534b1bc}{close}}(\textcolor{keywordtype}{int}, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{void}*);            \textcolor{comment}{//Perform other commands}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23     \textcolor{keyword}{static} \textcolor{keywordtype}{char}* \mbox{\hyperlink{class_p_c_i_a068e791a7fb863d350e5359c99b9d206}{pciDetailsToFilepath}}(\mbox{\hyperlink{struct_p_c_i_device_info}{PCIDeviceInfo}} pciInfo, \textcolor{keywordtype}{char}* outbuffer);}
\DoxyCodeLine{24 }
\DoxyCodeLine{25     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_c_i_a1106d267d3e59e7814cd1723aa23deb5}{pciWriteWord}}(uint8\_t bus, uint8\_t slot, uint8\_t func, uint8\_t offset, uint16\_t word);}
\DoxyCodeLine{26     uint16\_t \mbox{\hyperlink{class_p_c_i_a036fa65585bba548e93ef5746ce40538}{pciReadWord}}(uint8\_t bus, uint8\_t slot, uint8\_t func, uint8\_t offset);}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     uint16\_t \mbox{\hyperlink{class_p_c_i_a977d2dd666d05cb58a6981811f702379}{getVendorID}}(uint8\_t bus, uint8\_t slot, uint8\_t function);}
\DoxyCodeLine{29     uint16\_t \mbox{\hyperlink{class_p_c_i_a92ba91aa7f31f2278ee76bffb96bfca9}{getHeaderType}}(uint8\_t bus, uint8\_t slot, uint8\_t function);}
\DoxyCodeLine{30     uint16\_t \mbox{\hyperlink{class_p_c_i_ad35118fd60528dd8828ecc0fd1744bb3}{getClassCode}}(uint8\_t bus, uint8\_t slot, uint8\_t function);}
\DoxyCodeLine{31     uint8\_t \mbox{\hyperlink{class_p_c_i_a5d644ffb285ebd07ff3af7f5378537de}{getProgIF}}(uint8\_t bus, uint8\_t slot, uint8\_t function);}
\DoxyCodeLine{32     uint8\_t \mbox{\hyperlink{class_p_c_i_a083559f53dace3083bc25f440d7d16e2}{getRevisionID}}(uint8\_t bus, uint8\_t slot, uint8\_t function);}
\DoxyCodeLine{33     uint8\_t \mbox{\hyperlink{class_p_c_i_ac753d85f6de6badec2e8cbd9b11a5cf6}{getInterruptNumber}}(uint8\_t bus, uint8\_t slot, uint8\_t function);}
\DoxyCodeLine{34     uint32\_t \mbox{\hyperlink{class_p_c_i_a18013dae7a39a4c1590f4f6c6b941c4a}{getBARAddress}}(uint8\_t barNo, uint8\_t bus, uint8\_t slot, uint8\_t function);}
\DoxyCodeLine{35     uint8\_t \mbox{\hyperlink{class_p_c_i_ab0b5db858e60f52334b06c8b2f1c9527}{getSecondaryBus}}(uint8\_t bus, uint8\_t slot, uint8\_t function);}
\DoxyCodeLine{36     }
\DoxyCodeLine{37     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_c_i_aee2994910f078744183918467edbf589}{checkBus}}(uint8\_t bus); }
\DoxyCodeLine{38     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_c_i_ac7585c1e3d510f9eac0a7be5d5a097cf}{checkDevice}}(uint8\_t bus, uint8\_t device);}
\DoxyCodeLine{39     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_c_i_a3cc351ff189a7624d93b82d5a01dd1d1}{getDeviceData}}(uint8\_t bus, uint8\_t slot, uint8\_t function); }
\DoxyCodeLine{40     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_c_i_ac3e0f9b35e874b0c9c57ea5e49956c7b}{foundDevice}}(\mbox{\hyperlink{struct_p_c_i_device_info}{PCIDeviceInfo}} \mbox{\hyperlink{class_device_a3d1d3c3826ce5380536415d6d7e23441}{info}});}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     uint8\_t \mbox{\hyperlink{class_p_c_i_ad7060e589fb1b439b604bfeaded6832b}{readBAR8}}(uint32\_t addr, \textcolor{keywordtype}{int} offset = 0);}
\DoxyCodeLine{43     uint16\_t \mbox{\hyperlink{class_p_c_i_abd46ce4118649aeeac7e300dc2f41028}{readBAR16}}(uint32\_t addr, \textcolor{keywordtype}{int} offset = 0);}
\DoxyCodeLine{44     uint32\_t \mbox{\hyperlink{class_p_c_i_a01b4ffa8d4e0678b20130c7abc072a21}{readBAR32}}(uint32\_t addr, \textcolor{keywordtype}{int} offset = 0);}
\DoxyCodeLine{45 }
\DoxyCodeLine{46     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_c_i_a3e6137ba452f4ab45ef0f79d98ecfa27}{writeBAR8}}(uint32\_t addr, uint8\_t \mbox{\hyperlink{unaligned_8hpp_a66c6adb17a64370b8e95c4413da0c1b1}{val}}, \textcolor{keywordtype}{int} offset = 0);}
\DoxyCodeLine{47     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_c_i_a6cb59710a94c2eb100883a24e858bb82}{writeBAR16}}(uint32\_t addr, uint16\_t \mbox{\hyperlink{unaligned_8hpp_a66c6adb17a64370b8e95c4413da0c1b1}{val}}, \textcolor{keywordtype}{int} offset = 0);}
\DoxyCodeLine{48     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_c_i_a8893af81fb73176243c380539b63ca1a}{writeBAR32}}(uint32\_t addr, uint32\_t \mbox{\hyperlink{unaligned_8hpp_a66c6adb17a64370b8e95c4413da0c1b1}{val}}, \textcolor{keywordtype}{int} offset = 0);}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_c_i_ac3972ad295b6a043c13a98180a2b5924}{detect}}();                        \textcolor{comment}{//Detect any children}}
\DoxyCodeLine{51 }
\DoxyCodeLine{52     uint16\_t \mbox{\hyperlink{class_p_c_i_a8e8018137eaf53fed4ff4af2f563ee7c}{legacyMechanism}}(uint8\_t bus, uint8\_t slot, uint8\_t func, uint8\_t offset);}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_p_c_i_a3662d7d6fb9a4eb28e009c4ebde07dad}{mechanism}} = 1;}
\DoxyCodeLine{55 \};}
\DoxyCodeLine{56 }
\DoxyCodeLine{57 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
