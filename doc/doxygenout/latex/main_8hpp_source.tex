\hypertarget{main_8hpp_source}{}\doxysection{main.\+hpp}
\label{main_8hpp_source}\index{C:/Users/Alex/Desktop/Banana/kernel/krnl/main.hpp@{C:/Users/Alex/Desktop/Banana/kernel/krnl/main.hpp}}
\mbox{\hyperlink{main_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef \_MAIN\_HPP\_}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define \_MAIN\_HPP\_}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <stdarg.h>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <stddef.h>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#define KERNEL\_DEBUG }}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#pragma GCC diagnostic ignored "{}-\/Wsized-\/deallocation"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#pragma GCC diagnostic ignored "{}-\/Wattributes"{}}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#define EXPORT \_\_attribute\_\_((\_\_visibility\_\_("{}default"{}})))}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#define INLINE inline \_\_attribute\_\_((always\_inline)) }}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#ifdef KERNEL\_DEBUG}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define KDEBUG\_PAUSE(msg) if (KeGetBootConfigurationFlag(BootConfigurationFlag::ShowDebugAndMonochrome)) \{\(\backslash\)}}
\DoxyCodeLine{18 \textcolor{preprocessor}{KeSetBootMessage(msg);\(\backslash\)}}
\DoxyCodeLine{19 \textcolor{preprocessor}{if (!KeGetBootConfigurationFlag(BootConfigurationFlag::DontNeedKeypressForDebugMessages)) \{\(\backslash\)}}
\DoxyCodeLine{20 \textcolor{preprocessor}{    while (1) \{\(\backslash\)}}
\DoxyCodeLine{21 \textcolor{preprocessor}{        uint8\_t a = inb(0x60); \(\backslash\)}}
\DoxyCodeLine{22 \textcolor{preprocessor}{        if (a == 0x5A || a == 0x1C) break; \(\backslash\)}}
\DoxyCodeLine{23 \textcolor{preprocessor}{    \}\(\backslash\)}}
\DoxyCodeLine{24 \textcolor{preprocessor}{    while (1) \{\(\backslash\)}}
\DoxyCodeLine{25 \textcolor{preprocessor}{        uint8\_t a = inb(0x60); \(\backslash\)}}
\DoxyCodeLine{26 \textcolor{preprocessor}{        if (!(a == 0x5A || a == 0x1C)) break; \(\backslash\)}}
\DoxyCodeLine{27 \textcolor{preprocessor}{    \}\(\backslash\)}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\}\(\backslash\)}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\}}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#define KDEBUG\_PAUSE(msg) do \{;\} while(0);}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{33 }
\DoxyCodeLine{34 \textcolor{keyword}{extern} \textcolor{stringliteral}{"{}C"{}} \textcolor{keywordtype}{void}* \mbox{\hyperlink{main_8hpp_a52abbdf8792edbd1e34d4ca8d061f840}{malloc}}(\textcolor{keywordtype}{size\_t});}
\DoxyCodeLine{35 \textcolor{keyword}{extern} \textcolor{stringliteral}{"{}C"{}} \textcolor{keywordtype}{void}  \mbox{\hyperlink{main_8hpp_a81cf1f6221695fea6ee56cc6fd215648}{rfree}}(\textcolor{keywordtype}{void}*);}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{keyword}{inline} \mbox{\hyperlink{main_8hpp_a88600769e926a5672c33882719717cd7}{\_\_attribute\_\_}}((always\_inline)) \textcolor{keywordtype}{void}* \textcolor{keyword}{operator} \textcolor{keyword}{new}(\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{iso9660_8c_acfd6273064c5acdcfc39a23a69dd4343}{size}})}
\DoxyCodeLine{38 \{}
\DoxyCodeLine{39     \textcolor{keywordflow}{return} \mbox{\hyperlink{main_8hpp_a52abbdf8792edbd1e34d4ca8d061f840}{malloc}}(\mbox{\hyperlink{iso9660_8c_acfd6273064c5acdcfc39a23a69dd4343}{size}});}
\DoxyCodeLine{40 \}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{keyword}{inline} \mbox{\hyperlink{main_8hpp_a88600769e926a5672c33882719717cd7}{\_\_attribute\_\_}}((always\_inline)) \textcolor{keywordtype}{void} \textcolor{keyword}{operator} \textcolor{keyword}{delete}(\textcolor{keywordtype}{void}* \mbox{\hyperlink{unaligned_8hpp_a3fb79589b732956ce35d008fa4c8def8}{p}})}
\DoxyCodeLine{43 \{}
\DoxyCodeLine{44     \mbox{\hyperlink{main_8hpp_a81cf1f6221695fea6ee56cc6fd215648}{rfree}}(\mbox{\hyperlink{unaligned_8hpp_a3fb79589b732956ce35d008fa4c8def8}{p}});}
\DoxyCodeLine{45 \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47 \textcolor{preprocessor}{\#ifdef THIRTYTWOBIT}}
\DoxyCodeLine{48 \textcolor{preprocessor}{\#define PLATFORM\_ID 86}}
\DoxyCodeLine{49 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{50 \textcolor{preprocessor}{\#define PLATFORM\_ID 64}}
\DoxyCodeLine{51 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{preprocessor}{\#define OS\_VERSION\_MAJ 0}}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#define OS\_VERSION\_MIN 1}}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#define OS\_VERSION\_PATCH1 0}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#define OS\_VERSION\_PATCH2 0}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#define OS\_VERSION\_STRING "{}Banana v0.1 Alpha"{}}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#define OS\_COPYRIGHT "{}Copyright Alex Boxall 2016-\/2022. All rights reserved."{}}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a79b32d0793ef3615f1ef87bb92e75099}{PHYS\_RAM\_TABLE\_SIZE}}         = 0x513;}
\DoxyCodeLine{61 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a29e21840f665f2a29e2947d7250d0868}{PHYS\_HIGHEST\_UNUSED\_ADDRESS}} = 0x524;}
\DoxyCodeLine{62 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_ab6662063586cde090a6ff9196f89c695}{PHYS\_RAM\_TABLE}}                   = 0x600;}
\DoxyCodeLine{63 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a70d9fe2617f79e2a49438eb0b0a854c8}{PHYS\_DMA\_MEMORY\_1}}             = 0x10000;}
\DoxyCodeLine{64 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a4fa5f2ecaa117e98233d7d7a435670e6}{PHYS\_PHYS\_PAGE\_BITMAP}}         = 0x20000;}
\DoxyCodeLine{65 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a68e1bd4da45f3e54e3ef098f7e0dd6b5}{PHYS\_VIRT\_PAGE\_BITMAP}}         = 0x40000;}
\DoxyCodeLine{66 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a65648af7fd42a07d5ae1cc241c2c5633}{PHYS\_DMA\_MEMORY\_2}}             = 0x60000;}
\DoxyCodeLine{67 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a1128017351d68de9e12660c3c5849c41}{PHYS\_ALLOCED\_VIRT\_PAGES}}     = 0x100000;}
\DoxyCodeLine{68 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_ac7eb2573428afd8fb4af000d54300e9f}{PHYS\_KRNL\_PAGE\_DIRECTORY}}       = 0x1000;}
\DoxyCodeLine{69 }
\DoxyCodeLine{70 }
\DoxyCodeLine{71 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_ade6df906d237610977de0da1c0b7170c}{VIRT\_KERNEL\_BASE}}               = 0xC0000000U;}
\DoxyCodeLine{72 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}}                 = 0x2000000 + \mbox{\hyperlink{main_8hpp_ade6df906d237610977de0da1c0b7170c}{VIRT\_KERNEL\_BASE}};}
\DoxyCodeLine{73 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a7b52a302beefe7880dec9c2d71267266}{VIRT\_CPU\_SPECIFIC}}             = 0x2400000 + \mbox{\hyperlink{main_8hpp_ade6df906d237610977de0da1c0b7170c}{VIRT\_KERNEL\_BASE}};}
\DoxyCodeLine{74 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_ae79d7657284943219a83b50468a92a48}{VIRT\_RECURSIVE\_SPOT\_1}}         = 0x2800000 + \mbox{\hyperlink{main_8hpp_ade6df906d237610977de0da1c0b7170c}{VIRT\_KERNEL\_BASE}};}
\DoxyCodeLine{75 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a06bc3c0bd6cae831c047b9bbd3e2f7f0}{VIRT\_RECURSIVE\_SPOT\_2}}         = 0x2C00000 + \mbox{\hyperlink{main_8hpp_ade6df906d237610977de0da1c0b7170c}{VIRT\_KERNEL\_BASE}};}
\DoxyCodeLine{76 }
\DoxyCodeLine{77 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_aa38eb9c05464c70b391ffd135223c594}{VIRT\_DMA\_MEMORY\_1}}             = \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}} + \mbox{\hyperlink{main_8hpp_a70d9fe2617f79e2a49438eb0b0a854c8}{PHYS\_DMA\_MEMORY\_1}};}
\DoxyCodeLine{78 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_af1dd3a24028a5892c403421d7e65fc23}{SIZE\_DMA\_MEMORY\_1}}             = 0x10000;}
\DoxyCodeLine{79 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a7032d7d3c9b7c5af83a57ffbd6a07f7d}{VIRT\_DMA\_MEMORY\_2}}             = \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}} + \mbox{\hyperlink{main_8hpp_a65648af7fd42a07d5ae1cc241c2c5633}{PHYS\_DMA\_MEMORY\_2}};}
\DoxyCodeLine{80 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a46ac5a8a1b5b5d35c43a1a8bf5a48913}{SIZE\_DMA\_MEMORY\_2}}             = 0x20000;}
\DoxyCodeLine{81 }
\DoxyCodeLine{82 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a9dde37a02f5049f5cf72b56341287498}{VIRT\_KRNL\_PAGE\_DIRECTORY}}       = \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}} + \mbox{\hyperlink{main_8hpp_ac7eb2573428afd8fb4af000d54300e9f}{PHYS\_KRNL\_PAGE\_DIRECTORY}};}
\DoxyCodeLine{83 }
\DoxyCodeLine{84 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a4dfc8086e95b9f5c6fccd1e27028a498}{VIRT\_PHYS\_PAGE\_BITMAP}}         = \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}} + \mbox{\hyperlink{main_8hpp_a4fa5f2ecaa117e98233d7d7a435670e6}{PHYS\_PHYS\_PAGE\_BITMAP}};}
\DoxyCodeLine{85 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a9e02677e9dfcb402c82b530bbc302662}{SIZE\_PHYS\_PAGE\_BITMAP}}         = 128 * 1024;}
\DoxyCodeLine{86 }
\DoxyCodeLine{87 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_ade393999fa06e3abd112549bdd373692}{VIRT\_VIRT\_PAGE\_BITMAP}}         = \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}} + \mbox{\hyperlink{main_8hpp_a68e1bd4da45f3e54e3ef098f7e0dd6b5}{PHYS\_VIRT\_PAGE\_BITMAP}};}
\DoxyCodeLine{88 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a1e787e4b03832f7c2b3b0dd6b436e852}{SIZE\_VIRT\_PAGE\_BITMAP}}         = 32 * 1024;}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a2d3332e0f5343b5413bc75f228140f28}{VIRT\_RAM\_TABLE}}                   = \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}} + \mbox{\hyperlink{main_8hpp_ab6662063586cde090a6ff9196f89c695}{PHYS\_RAM\_TABLE}};}
\DoxyCodeLine{91 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a4f46ab16545302961bda8dac3e0b7a6b}{VIRT\_RAM\_TABLE\_SIZE}}         = \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}} + \mbox{\hyperlink{main_8hpp_a79b32d0793ef3615f1ef87bb92e75099}{PHYS\_RAM\_TABLE\_SIZE}};}
\DoxyCodeLine{92 }
\DoxyCodeLine{93 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a83413f931bd9ae5a422e827397b4f70b}{VIRT\_HIGHEST\_UNUSED\_ADDRESS}} = \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}} + \mbox{\hyperlink{main_8hpp_a29e21840f665f2a29e2947d7250d0868}{PHYS\_HIGHEST\_UNUSED\_ADDRESS}};}
\DoxyCodeLine{94 }
\DoxyCodeLine{95 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a66cd8a009a625633bbeb8a734c722a2f}{SIZE\_APP\_STACK\_USER}}         = 0x180000;}
\DoxyCodeLine{96 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a54e7c03117757bda18b0971a45cd23aa}{SIZE\_APP\_STACK\_KRNL}}         = 0x80000;}
\DoxyCodeLine{97 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a6b9b6cb18687f0d56f7e02aff3bb4c2d}{SIZE\_APP\_STACK\_TOTAL}}           = \mbox{\hyperlink{main_8hpp_a66cd8a009a625633bbeb8a734c722a2f}{SIZE\_APP\_STACK\_USER}} + \mbox{\hyperlink{main_8hpp_a54e7c03117757bda18b0971a45cd23aa}{SIZE\_APP\_STACK\_KRNL}};}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a24b23a209ab79c79305d312dba9dcddd}{VIRT\_APP\_DATA}}                 = 0x10000000;}
\DoxyCodeLine{100 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a29be02fa5ae613f8033dba1b3cd1d81e}{VIRT\_APP\_STACK\_USER\_TOP}}     = 0x2000000;}
\DoxyCodeLine{101 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a3f2585e1778a28a38ee5026ae3502bdd}{VIRT\_APP\_STACK\_KRNL\_TOP}}     = \mbox{\hyperlink{main_8hpp_a29be02fa5ae613f8033dba1b3cd1d81e}{VIRT\_APP\_STACK\_USER\_TOP}} -\/ \mbox{\hyperlink{main_8hpp_a66cd8a009a625633bbeb8a734c722a2f}{SIZE\_APP\_STACK\_USER}};}
\DoxyCodeLine{102 }
\DoxyCodeLine{103 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a56cebaa69e54f8da21a28f33fb440bed}{VIRT\_HEAP\_MIN}}                 = \mbox{\hyperlink{main_8hpp_ade6df906d237610977de0da1c0b7170c}{VIRT\_KERNEL\_BASE}} + 0x08000000;}
\DoxyCodeLine{104 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_acc6d36100818c49b759e504bad23e93f}{VIRT\_HEAP\_MAX}}                 = 0xEFFFFFFFU;}
\DoxyCodeLine{105 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_acc998ca31737e83f4d6fd6a6c3aa869f}{VIRT\_SBRK\_MIN}}                 = 0xF0000000U;}
\DoxyCodeLine{106 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_aaea3095d56da60040655f7a0a4a678fe}{VIRT\_SBRK\_MAX}}                 = 0xFFC00000U;}
\DoxyCodeLine{107 }
\DoxyCodeLine{108 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_ad6b32b7b592872ef9495d27410bd2a91}{VIRT\_ALLOCED\_VIRT\_PAGES}}     = \mbox{\hyperlink{main_8hpp_ab470278edcc6cedd831cb229a0e8f1e9}{VIRT\_LOW\_MEGS}} + 0x100000;}
\DoxyCodeLine{109 }
\DoxyCodeLine{110 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{main_8hpp_a237f942c5d9327b1f827520423011a25}{VIRT\_ACPI\_DRIVER}}               = 0xC2484000U;}
\DoxyCodeLine{111 }
\DoxyCodeLine{112 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{terminal_8hpp}{krnl/terminal.hpp}}"{}}}
\DoxyCodeLine{113 }
\DoxyCodeLine{114 }
\DoxyCodeLine{115 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
